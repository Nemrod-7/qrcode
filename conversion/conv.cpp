#include <iostream>
#include <fstream>
#include <iomanip>

using namespace std;
// enum old {H,Q,M,L};

enum ECC {M, L, H, Q};
enum MODE {END,NUMERIC,ALPHANUM,STRUCTURED,BYTE,FNC1,_6_,ECI, KANJI};

//                                         [         data codewords         ] [            ecc codewords             ]
// the qr binary data is encoded like this [[[mode][data length][data][0000]] [ecc block 1][ecc block 2][ecc block...]

// the message received (numeric, alphanumeric, byte or kanji) is encoded and the error correction code chosen determine the size needed and so the size of the grid.
// this table is used just to determine the version of the qr code and nothing else. : capacity[version][mode][ecc] -> maximum of encoded [data] codewords allowed .
//           0 -> 1              1 -> 2                    2 -> 4                         3 -> 8
// END,     NUMERIC,            ALPHANUM,   STRUCTURED,     BYTE,      FNC1,_6_,ECI,       KANJI
//        L   M   Q   H         L   M   Q   H           L   M   Q   H                  L   M   Q   H
const unsigned int capacity[23][9][4] = {
{{},{                    },{                    },{},{                    },{},{},{},{                    }},
{{},{  41,  34,  27,  17,},{  25,  20,  16,  10,},{},{  17,  14,  11,   7,},{},{},{},{  10,   8,   7,   4,}},
{{},{  77,  63,  48,  34,},{  47,  38,  29,  20,},{},{  32,  26,  20,  14,},{},{},{},{  20,  16,  12,   8,}},
{{},{ 127, 101,  77,  58,},{  77,  61,  47,  35,},{},{  53,  42,  32,  24,},{},{},{},{  32,  26,  20,  15,}},
{{},{ 187, 149, 111,  82,},{ 114,  90,  67,  50,},{},{  78,  62,  46,  34,},{},{},{},{  48,  38,  28,  21,}},
{{},{ 255, 202, 144, 106,},{ 154, 122,  87,  64,},{},{ 106,  84,  60,  44,},{},{},{},{  65,  52,  37,  27,}},
{{},{ 322, 255, 178, 139,},{ 195, 154, 108,  84,},{},{ 134, 106,  74,  58,},{},{},{},{  82,  65,  45,  36,}},
{{},{ 370, 293, 207, 154,},{ 224, 178, 125,  93,},{},{ 154, 122,  86,  64,},{},{},{},{  95,  75,  53,  39,}},
{{},{ 461, 365, 259, 202,},{ 279, 221, 157, 122,},{},{ 192, 152, 108,  84,},{},{},{},{ 118,  93,  66,  52,}},
{{},{ 552, 432, 312, 235,},{ 335, 262, 189, 143,},{},{ 230, 180, 130,  98,},{},{},{},{ 141, 111,  80,  60,}},
{{},{ 652, 513, 364, 288,},{ 395, 311, 221, 174,},{},{ 271, 213, 151, 119,},{},{},{},{ 167, 131,  93,  74,}},
{{},{ 772, 604, 427, 331,},{ 468, 366, 259, 200,},{},{ 321, 251, 177, 137,},{},{},{},{ 198, 155, 109,  85,}},
{{},{ 883, 691, 489, 374,},{ 535, 419, 296, 227,},{},{ 367, 287, 203, 155,},{},{},{},{ 226, 177, 125,  96,}},
{{},{1022, 796, 580, 427,},{ 619, 483, 352, 259,},{},{ 425, 331, 241, 177,},{},{},{},{ 262, 204, 149, 109,}},
{{},{1101, 871, 621, 468,},{ 667, 528, 376, 283,},{},{ 458, 362, 258, 194,},{},{},{},{ 282, 223, 159, 120,}},
{{},{1250, 991, 703, 530,},{ 758, 600, 426, 321,},{},{ 520, 412, 292, 220,},{},{},{},{ 320, 254, 180, 136,}},
{{},{1408,1082, 775, 602,},{ 854, 656, 470, 365,},{},{ 586, 450, 322, 250,},{},{},{},{ 361, 277, 198, 154,}},
{{},{1548,1212, 876, 674,},{ 938, 734, 531, 408,},{},{ 644, 504, 364, 280,},{},{},{},{ 397, 310, 224, 173,}},
{{},{1725,1346, 948, 746,},{1046, 816, 574, 452,},{},{ 718, 560, 394, 310,},{},{},{},{ 442, 345, 243, 191,}},
{{},{1903,1500,1063, 813,},{1153, 909, 644, 493,},{},{ 792, 624, 442, 338,},{},{},{},{ 488, 384, 272, 208,}},
{{},{2061,1600,1159, 919,},{1249, 970, 702, 557,},{},{ 858, 666, 482, 382,},{},{},{},{ 528, 410, 297, 235,}},
{{},{2232,1708,1224, 969,},{1352,1035, 742, 587,},{},{ 929, 711, 509, 403,},{},{},{},{ 572, 438, 314, 248,}},
{{},{2409,1872,1358,1056,},{1460,1134, 823, 640,},{},{1003, 779, 565, 439,},{},{},{},{ 618, 480, 348, 270,}} };


int main() {

    ofstream ofs("table", ios::app);
    ofs << "unsigned capacity[23][9][4] = {\n";

    for (int version = 0; version < 23; version++) {
      ofs << "{" ;
      for (int mode = 0; mode < 9; mode++) {
              ofs << "{" ;
        if (capacity[version][mode][0] != 0) {
            ofs << setw(4) << capacity[version][mode][1] << ',';
            ofs << setw(4) << capacity[version][mode][0] << ',';
            ofs << setw(4) << capacity[version][mode][3] << ',';
            ofs << setw(4) << capacity[version][mode][2];
        }
      ofs << "}" ;
      if (mode < 8) ofs << ',';
      }
        ofs << "},\n";
    }
    ofs << "};";

    ofs.close();

}
